{{ define "partials/test_result.html" }}
{{if .error}}
<!-- Error result -->
<div class="inline-flex items-center gap-2 bg-red-500/20 border border-red-500/30 text-red-300 px-4 py-2 rounded-xl">
    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
    </svg>
    <span><strong class="font-semibold">Error:</strong> {{.error}}</span>
</div>
{{else}}
<div class="flex items-center gap-4 animate-fade-in">
    {{if .allowed}}
    <!-- Request allowed -->
    <span
        class="inline-flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-semibold bg-emerald-500/20 text-emerald-300 border border-emerald-500/30">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        Request Allowed
    </span>
    {{else}}
    <!-- Request rate limited -->
    <span
        class="inline-flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-semibold bg-red-500/20 text-red-300 border border-red-500/30">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636" />
        </svg>
        Rate Limited
    </span>
    {{end}}

    <!-- Remaining counter -->
    <span
        class="inline-flex items-center gap-2 px-3 py-2 rounded-xl text-sm bg-white/5 border border-white/10 text-slate-300">
        <svg class="w-4 h-4 text-primary-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z" />
        </svg>
        Remaining: <strong class="text-white font-bold">{{printf "%.0f" .remaining}}</strong>
    </span>
</div>
{{end}}
{{ end }}