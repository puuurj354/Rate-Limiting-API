{{if .error}}
<div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded">
    <strong>Error:</strong> {{.error}}
</div>
{{else if .status}}
<div class="space-y-4">
    {{if .message}}
    <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4">
        {{.message}}
    </div>
    {{end}}
    
    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
        <div class="bg-gray-50 rounded-lg p-4 text-center">
            <p class="text-sm text-gray-500">Key</p>
            <p class="font-mono text-sm text-gray-800 truncate">{{.status.Key}}</p>
        </div>
        <div class="bg-gray-50 rounded-lg p-4 text-center">
            <p class="text-sm text-gray-500">Current Usage</p>
            <p class="text-2xl font-bold text-gray-800">{{printf "%.1f" .status.Current}}</p>
        </div>
        <div class="bg-gray-50 rounded-lg p-4 text-center">
            <p class="text-sm text-gray-500">Capacity</p>
            <p class="text-2xl font-bold text-gray-800">{{printf "%.0f" .status.Capacity}}</p>
        </div>
        <div class="bg-gray-50 rounded-lg p-4 text-center">
            <p class="text-sm text-gray-500">Remaining</p>
            <p class="text-2xl font-bold {{if gt .status.Remaining 0.0}}text-green-600{{else}}text-red-600{{end}}">{{printf "%.1f" .status.Remaining}}</p>
        </div>
    </div>
    
    <!-- Progress Bar -->
    <div class="w-full bg-gray-200 rounded-full h-4">
        {{$percent := 0.0}}
        {{if gt .status.Capacity 0.0}}
            {{$percent = (div .status.Current .status.Capacity)}}
        {{end}}
        <div class="{{if .status.IsLimited}}bg-red-600{{else}}bg-indigo-600{{end}} h-4 rounded-full transition-all duration-300" 
             style="width: {{printf "%.0f" (mul $percent 100)}}%"></div>
    </div>
    
    <div class="flex justify-between text-sm text-gray-500">
        <span>Leak Rate: {{printf "%.1f" .status.LeakRate}}/sec</span>
        <span class="{{if .status.IsLimited}}text-red-600 font-semibold{{else}}text-green-600{{end}}">
            {{if .status.IsLimited}}RATE LIMITED{{else}}OK{{end}}
        </span>
    </div>
</div>
{{else}}
<p class="text-gray-500">No status data available</p>
{{end}}